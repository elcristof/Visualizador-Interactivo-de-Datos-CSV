<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Mini BI Tool Accesible</title>
  <link rel="stylesheet" href="styles.css"/>

  <!-- Librer칤as por CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>

<body>
  <header>
    <h1 id="app-title">Copia de Excel</h1>
    <div class="controls">
      <button id="increase-font" aria-label="Aumentar tama침o de letra">A+</button>
      <button id="decrease-font" aria-label="Disminuir tama침o de letra">A-</button>
      <button id="darkmode-toggle" aria-label="Activar o desactivar modo oscuro">游깹</button>
    </div>
  </header>

  <main role="main">
    <!-- Mensajes accesibles -->
    <div id="status" role="status" aria-live="polite"></div>

    <!-- 츼rea CSV -->
    <section aria-labelledby="csv-section">
      <h2 id="csv-section">1) Pegar o importar CSV</h2>

      <div class="grid2">
        <div>
          <input type="file" id="csv-file" accept=".csv,text/csv" aria-label="Seleccionar archivo CSV">
          <textarea id="csv-input" placeholder="Nombre,Edad&#10;Maria,30&#10;Juan,25" aria-label="츼rea para pegar CSV"></textarea>
          <button id="parse-btn" aria-label="Parsear CSV">parsear</button>
          <div id="warnings" role="alert"></div>
        </div>

        <div>
          <label for="global-filter">Filtro r치pido (todas las columnas):</label>
          <input type="search" id="global-filter" placeholder="Escribe para filtrar..." aria-label="Buscar en toda la tabla"/>
          <button id="clear-selection" class="secondary" aria-label="Limpiar selecci칩n de filas">Limpiar selecci칩n</button>
          <small class="hint">Tip: haz clic sobre una fila para seleccionarla. KPIs y gr치fica usan la selecci칩n; si no hay selecci칩n, usan lo filtrado.</small>
        </div>
      </div>
    </section>

    <!-- KPIs -->
    <section aria-labelledby="kpi-section">
      <h2 id="kpi-section">2) Panel de estad칤sticas clave</h2>

      <div class="kpi-controls">
        <label for="metric-column">Columna m칠trica:</label>
        <select id="metric-column" aria-label="Selecciona la columna num칠rica para KPIs"></select>
      </div>

      <div class="kpi-grid" role="group" aria-label="Tarjetas de KPIs">
        <article class="kpi-card" aria-live="polite">
          <h3>Filas (vista)</h3>
          <p id="stat-rows">0</p>
          <small id="stat-rows-detail">0 seleccionadas</small>
        </article>
        <article class="kpi-card">
          <h3>Columnas</h3>
          <p id="stat-cols">0</p>
        </article>
        <article class="kpi-card">
          <h3>Suma</h3>
          <p id="stat-sum">0</p>
        </article>
        <article class="kpi-card">
          <h3>Promedio</h3>
          <p id="stat-avg">0</p>
        </article>
        <article class="kpi-card">
          <h3>M칤nimo</h3>
          <p id="stat-min">0</p>
        </article>
        <article class="kpi-card">
          <h3>M치ximo</h3>
          <p id="stat-max">0</p>
        </article>
      </div>
    </section>

    <!-- Tabla -->
    <section aria-labelledby="table-section">
      <h2 id="table-section">3) Tabla interactiva</h2>
      <div class="table-container" tabindex="0" aria-label="Tabla de datos generada del CSV">
        <table id="data-table"></table>
      </div>
    </section>

    <!-- Gr치fica -->
    <section aria-labelledby="chart-section">
      <h2 id="chart-section">4) Configurar gr치fica</h2>

      <div class="grid4">
        <div>
          <label for="x-column">Eje X:</label>
          <select id="x-column"></select>
        </div>
        <div>
          <label for="y-column">Eje Y:</label>
          <select id="y-column"></select>
        </div>
        <div>
          <label for="chart-type">Tipo:</label>
          <select id="chart-type">
            <option value="bar">Barras</option>
            <option value="line">L칤neas</option>
          </select>
        </div>
        <div>
          <label for="orientation">Orientaci칩n:</label>
          <select id="orientation">
            <option value="vertical">Vertical</option>
            <option value="horizontal">Horizontal</option>
          </select>
        </div>
      </div>

      <div class="actions">
        <button id="export-btn" aria-label="Exportar gr치fica como imagen PNG">Exportar PNG</button>
      </div>

      <div class="chart-wrapper">
        <canvas id="chart" role="img" aria-label="Gr치fica generada a partir de los datos cargados"></canvas>
      </div>
    </section>
  </main>

  <script src="script.js"></script>
</body>
</html>

